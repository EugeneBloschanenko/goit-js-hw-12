{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nconst loader = document.querySelector('.loader');\n\nconst API_KEY = \"49108908-dee8565c8232193f8d4c70c7a\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nfunction showLoader() {\n  loader.style.display = 'inline-block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';  \n}\n\nexport async function fetchImages(query, page = 1) {\n  showLoader();\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page, \n    per_page: 40, \n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error(\"Помилка під час запиту:\", error);\n    return { hits: [], totalHits: 0 }; \n  } finally {\n    hideLoader();\n  }\n}","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\ngallery.classList.add('gallery-style');\n\nexport function renderGallery(images, append = false) {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `\n      <div class=\"photo-card\">\n        <a href=\"${largeImageURL}\"> <!-- Використовуємо велике зображення тут -->\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b><br>${likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b><br>${views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b><br>${comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b><br>${downloads}\n          </p>\n        </div>\n      </div>\n    `;\n  }).join('');\n\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', markup); \n  } else {\n    gallery.innerHTML = markup; \n  }\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n  });\n  \n  lightbox.refresh();\n}","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  const searchQuery = e.currentTarget.elements.search.value.trim();\n  if (!searchQuery) {\n    iziToast.error({\n      title: 'Введіть у полі пошуку яке зображення Вас цікавить.',\n      position: 'topCenter'\n    });\n    return;\n  }\n\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n\n  currentQuery = searchQuery;\n  currentPage = 1;\n\n  fetchImages(currentQuery, currentPage)\n    .then(({ hits, totalHits: fetchedTotalHits }) => {\n      if (hits.length === 0) {\n        iziToast.error({\n          title: 'Пошук не дав результатів. Будь ласка, спробуйте ще!',\n          position: 'topCenter'\n        });\n        return;\n      }\n\n      totalHits = fetchedTotalHits;\n      renderGallery(hits);\n      checkLoadMoreButton();\n    })\n    .catch(error => {\n      console.error('Під час запиту сталася помилка:', error);\n      iziToast.error({\n        title: 'Сталася помилка! Повторіть спробу пізніше.',\n        message: `${error}`,\n        position: 'topCenter'\n      });\n    });\n\n  form.reset();\n}\n\nfunction onLoadMore() {\n  currentPage += 1;\n\n  fetchImages(currentQuery, currentPage)\n    .then(({ hits }) => {\n      renderGallery(hits, true); \n      checkLoadMoreButton();\n      smoothScroll();\n    })\n    .catch(error => {\n      console.error('Помилка при завантаженні додаткових зображень:', error);\n      iziToast.error({\n        title: 'Не вдалося завантажити додаткові зображення!',\n        position: 'topCenter'\n      });\n    });\n}\n\nfunction checkLoadMoreButton() {\n  if (currentPage * 40 >= totalHits) {\n    loadMoreBtn.style.display = 'none';\n    iziToast.info({\n      title: 'Ви переглянули всі зображення за Вашим запитом!',\n      position: 'topCenter'\n    });\n  } else {\n    loadMoreBtn.style.display = 'block';\n  }\n}\n\nfunction smoothScroll() {\n  const firstItem = gallery.firstElementChild;\n  if (!firstItem) return; \n\n  const { height } = firstItem.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: \"smooth\"\n  });\n}\n"],"names":["loader","API_KEY","BASE_URL","showLoader","hideLoader","fetchImages","query","page","params","axios","error","gallery","renderGallery","images","append","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","form","loadMoreBtn","currentPage","currentQuery","totalHits","onSearch","onLoadMore","e","searchQuery","iziToast","hits","fetchedTotalHits","checkLoadMoreButton","smoothScroll","firstItem","height"],"mappings":"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"}